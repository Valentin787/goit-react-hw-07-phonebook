{"ast":null,"code":"import _slicedToArray from\"/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-07-phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useCallback,useMemo}from'react';import{useDispatch,useSelector}from'react-redux';import{getContacts,addContact,deleteContact}from'redux/phoneBook/operation';import ContactForm from'../ContactForm';import ContactList from'../ContactList';import Filter from'../Filter';import Loader from'../../common/Loader';import{filterContacts}from'redux/phoneBook/phoneBookActions';import{contactsState,filterPhoneBook,loadingSelector}from'../../redux/phoneBook/phonebook-selectors';import{ToastContainer,toast}from'react-toastify/dist/react-toastify';import\"react-toastify/dist/ReactToastify.css\";import s from'./App.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var loading=useSelector(loadingSelector);var contactsBook=useSelector(contactsState);var filterValueName=useSelector(filterPhoneBook);var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),newContact=_useState2[0],setNewContact=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),deleteContactId=_useState4[0],setDeleteContactId=_useState4[1];//GET_CONTACTS\nuseEffect(function(){dispatch(getContacts());},[dispatch]);//ADD_CONTACT\nvar confirmContact=function confirmContact(contact){return setNewContact(contact);};useEffect(function(){if(!newContact)return;var isHaveName=contactsBook.some(function(_ref){var name=_ref.name;return name===newContact.name;});if(isHaveName){toast.error(\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442 \\u0437 \".concat(newContact.name,\" \\u0432\\u0436\\u0435 \\u0456\\u0441\\u043D\\u0443\\u0454 :((\"),{icon:\"\\u274C\"});setNewContact(null);}if(!isHaveName){dispatch(addContact(newContact));toast.success(\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442  \".concat(newContact.name,\" \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E \\u0434\\u043E \\u0441\\u043F\\u0438\\u0441\\u043A\\u0443 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0456\\u0432 :))\"),{icon:\"\\u2705\"});setNewContact(null);}},[contactsBook,dispatch,newContact]);// FILTER CITY\nvar filterChangeInput=function filterChangeInput(value){return dispatch(filterContacts(value));};//Варіант з хуком USE MEMO\nvar filterContactsName=useMemo(function(){var normalizedFilter=filterValueName.toLowerCase();var finalArray=contactsBook&&contactsBook.filter(function(contact){return contact.name.toLowerCase().includes(normalizedFilter);});if(finalArray.length===0&&filterValueName!==\"\"){toast.info(\"\\u0423\\u0441\\u0456 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0438 \\u043F\\u043E \\u0437\\u0430\\u043F\\u0438\\u0442\\u0443 \\\"\".concat(filterValueName.toUpperCase(),\"\\\" \\u0431\\u0443\\u043B\\u0438 \\u0432\\u0438\\u0434\\u0430\\u043B\\u0435\\u043D\\u0456 ...\\u270B!!\"));toast.warning(\"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0456\\u0442\\u044C \\u043F\\u043E\\u043B\\u0435 \\u0434\\u043B\\u044F \\u0437\\u0430\\u043F\\u0438\\u0442\\u0443, \\u0449\\u043E\\u0431 \\u043F\\u043E\\u0431\\u0430\\u0447\\u0438\\u0442\\u0438 \\u0443\\u0441\\u0456 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0438 :)))\");dispatch(filterContacts(\"\"));}return finalArray;},[contactsBook,dispatch,filterValueName]);//DELETE_CONTACT \nvar onDeleteContact=useCallback(function(id){return setDeleteContactId(id);},[]);useEffect(function(){if(!deleteContactId)return;dispatch(deleteContact(deleteContactId));toast.success(\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442 \\u0432\\u0438\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0439 \\u0437\\u0456 \\u0441\\u043F\\u0438\\u0441\\u043A\\u0443 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0456\\u0432 :))\",{icon:\"\\u274E\"});setDeleteContactId(null);},[deleteContactId,dispatch]);var normalizeName=function normalizeName(name){return name.split(' ').map(function(word){var firstUpCaseLetter=word.charAt(0).toUpperCase();var anoterLetter=word.substring(1);return\"\".concat(firstUpCaseLetter).concat(anoterLetter);}).join(' ');};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loader,{loading:loading}),/*#__PURE__*/_jsxs(\"div\",{className:s.app,children:[/*#__PURE__*/_jsx(ContactForm,{confirmContact:confirmContact,normalizeName:normalizeName}),contactsBook.length>0&&/*#__PURE__*/_jsx(Filter,{filterChangeInput:filterChangeInput,value:filterValueName}),!contactsBook.length&&!loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Please, add contact!\"}),/*#__PURE__*/_jsx(ContactList,{filterContactsName:filterContactsName,onDeleteContact:onDeleteContact}),/*#__PURE__*/_jsx(ToastContainer,{theme:\"dark\"})]})]});};export default App;","map":{"version":3,"names":["useEffect","useState","useCallback","useMemo","useDispatch","useSelector","getContacts","addContact","deleteContact","ContactForm","ContactList","Filter","Loader","filterContacts","contactsState","filterPhoneBook","loadingSelector","ToastContainer","toast","s","App","loading","contactsBook","filterValueName","dispatch","newContact","setNewContact","deleteContactId","setDeleteContactId","confirmContact","contact","isHaveName","some","name","error","icon","success","filterChangeInput","value","filterContactsName","normalizedFilter","toLowerCase","finalArray","filter","includes","length","info","toUpperCase","warning","onDeleteContact","id","normalizeName","split","map","word","firstUpCaseLetter","charAt","anoterLetter","substring","join","app"],"sources":["/Users/valentinkuzmich/Desktop/projects Go IT/goit-react-hw-07-phonebook/src/components/App/App.jsx"],"sourcesContent":["import { useEffect,useState,useCallback,useMemo} from 'react';\nimport { useDispatch,useSelector } from 'react-redux';\nimport { getContacts,addContact, deleteContact  } from 'redux/phoneBook/operation';\nimport ContactForm from '../ContactForm';\nimport ContactList from '../ContactList';\nimport Filter from '../Filter';\nimport Loader from '../../common/Loader';\n\nimport { filterContacts } from 'redux/phoneBook/phoneBookActions';\nimport {contactsState,filterPhoneBook, loadingSelector} from '../../redux/phoneBook/phonebook-selectors'\nimport { ToastContainer,toast } from 'react-toastify/dist/react-toastify';\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport s from './App.module.css';\n\nconst App = () => {\n\n  const loading = useSelector(loadingSelector);\n  const contactsBook = useSelector(contactsState);\n  const filterValueName = useSelector(filterPhoneBook);\n  const dispatch = useDispatch();\n\n  const [newContact, setNewContact] = useState(null);\n  const [deleteContactId, setDeleteContactId] = useState(null);\n\n  //GET_CONTACTS\n\n  useEffect(() => {\n    dispatch(getContacts())\n  }, [dispatch])\n  \n  //ADD_CONTACT\n  const confirmContact = (contact) => setNewContact(contact);\n\n  useEffect(() => {\n    if (!newContact) return;\n    const isHaveName = contactsBook.some(({ name }) => name === newContact.name);\n\n    if (isHaveName) {\n      toast.error(`Контакт з ${newContact.name} вже існує :((`, { icon: `❌` });\n      setNewContact(null);\n    }\n    if (!isHaveName) {\n      dispatch(addContact(newContact));\n      toast.success(`Контакт  ${newContact.name} добавлено до списку контактів :))`, {\n        icon: `✅`\n      });\n      setNewContact(null);\n    }\n  }, [contactsBook, dispatch, newContact]);\n\n  // FILTER CITY\n\n  const filterChangeInput = (value) => dispatch(filterContacts(value))\n  \n  //Варіант з хуком USE MEMO\n  const filterContactsName = useMemo(() => {\n    const normalizedFilter = filterValueName.toLowerCase();\n\n    const finalArray = contactsBook && contactsBook.filter((contact) => contact.name.toLowerCase().includes(normalizedFilter));\n\n    if (finalArray.length === 0 && filterValueName !== \"\") {\n      toast.info(`Усі контакти по запиту \"${filterValueName.toUpperCase()}\" були видалені ...✋!!`)\n      toast.warning(`Очистіть поле для запиту, щоб побачити усі контакти :)))`)\n      dispatch(filterContacts(\"\"))\n    }\n    return finalArray;\n  }, [contactsBook, dispatch, filterValueName]);\n  \n  //DELETE_CONTACT \n\n  const onDeleteContact = useCallback((id) => setDeleteContactId(id),[]);\n\n  useEffect(() => {\n    if (!deleteContactId) return;\n    dispatch(deleteContact(deleteContactId));\n    toast.success(`Контакт видалений зі списку контактів :))`, {\n        icon: `❎`\n      });\n    setDeleteContactId(null);\n\n  }, [deleteContactId, dispatch])\n  \n  \n \n  const normalizeName = name => name\n      .split(' ')\n      .map(word => {\n        const firstUpCaseLetter = word.charAt(0).toUpperCase();\n        const anoterLetter = word.substring(1);\n        return `${firstUpCaseLetter}${anoterLetter}`;\n      })\n      .join(' ');\n\n  return (\n    <>\n      {loading && <Loader loading={loading}/>}\n      <div className={s.app}>\n      \n      {<ContactForm\n        confirmContact={confirmContact}\n        normalizeName={normalizeName}\n      />}\n    {contactsBook.length > 0 && (\n        <Filter\n          filterChangeInput={filterChangeInput}\n          value={filterValueName}\n      />\n  )}\n    {!contactsBook.length && !loading && <p>Please, add contact!</p>}\n      <ContactList\n        filterContactsName={filterContactsName}\n        onDeleteContact={onDeleteContact}\n      />\n      <ToastContainer theme=\"dark\"/>\n    </div>\n    </>\n    \n\n  );\n};\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}